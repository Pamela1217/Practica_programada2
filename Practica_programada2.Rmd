---
title: "Practica programada 2"
author: "Sandra López Torres"
date: "2023-08-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(stringr)
library(readr)
library(readxl) 
library(writexl) 
library(utils)
library(RSQLite) 
library(DBI) 
library(lubridate)
library(gt)
library(leaflet)
library(openxlsx)
```


a. Cree un archivo Rmarkdown para resolver esta práctica programada. En el chunk de setup cargue las
librerías que considere necesarias para resolver la práctica. Los datos para trabajar puede cargarlos con
la función read_csv de readr directamente de la siguiente dirección: “https://raw.githubusercontent.
com/isa229/programacion_analisis_datos_ii/main/air_quality_index.csv”.

```{r}
url <- "https://raw.githubusercontent.com/isa229/programacion_analisis_datos_ii/main/air_quality_index.csv"

datos <- read_csv(url)

glimpse(datos)
```

b. Cuántas categorías diferentes de AQI (AQI Category) hay en este conjunto de datos? Cuáles son?

```{r}
aqi_categorias <- unique(datos$`AQI Category`)
print(aqi_categorias)
```
R/ Hay 6 diferentes tipos de categorías


c. Cree una tabla que indique la cantidad de ciudades que hay en cada categoría de AQI (AQI Category).
Adicionalmente, traduzca las categorías a español, por ejemplo “Good” sería “Bueno”. Presente esta
tabla con el paquete gt, añadiendo títulos y subtítulos.

```{r}
traducir_espa <- c(
  "Good" = "Bueno",
  "Moderate" = "Moderado",
  "Unhealthy for Sensitive Groups" = "Insalubre para grupos sensibles",
  "Unhealthy" = "Insalubre",
  "Very Unhealthy" = "Muy insalubre",
  "Hazardous" = "Peligroso"
)
datos$`AQI Category` <- traducir_espa[datos$`AQI Category`]

tabla_resumen <- datos |> 
  group_by(`AQI Category`) |> 
  summarize(Cantidad_de_Ciudades = n())

tabla_gt <- gt(tabla_resumen)

tabla_gt <- tabla_gt |> 
  tab_header(
    title = "Cantidad de Ciudades por Categoría",
    subtitle = "Calidad del aire"
  )
tabla_gt

```